<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title></title>
    <meta name="application-name" content="null"/>
    <meta name="keywords" content="null" />
    <meta name="description" content="null" />
  </head>
  <body>
    <div style="height: 100%; width: 100%; border: solid 1px #808080; background-color: #ffffff; box-sizing: border-box">
      <div style="height: 64px; display: flex; align-items: center;">
        <div style="width: 150px; height: 64px; margin-left: 24px">
          <div style="height: 16px; display: flex; align-items: center; margin-top: 16px; font-weight: 500">
            <span style="font-size: 14px; color: rgba(0,0,0,.76);" id="userName">用户昵称ABC</span>
          </div>
          <div style="height: 16px; display: flex; align-items: center; margin-top: 6px">
            <span style="font-size: 12px; color: rgba(0,0,0,.54)" id="deviceStatus">设备连接正常</span>
          </div>
        </div>
        <div style="width: 32px; height: 32px; margin-top: 16px, margin-left: 16px; border-radius: 16px; overflow: hidden">
          <img
             id="avatar"
             width="32"
             height="32"
             src="https://wisnuc.s3.cn-north-1.amazonaws.com.cn/avatar/3d166b6f-2b36-46eb-88b3-e9517e78f17d"
          >
        </div>
      </div>

      <div style="height: 56px; display: flex; align-items: center;">
      </div>
      <div class="buttonDiv" style="opacity: 0.5" onclick="openChangeDevice()" id="changeDeviceButton">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" class="svg">
          <defs>
            <path id="a" d="M0 0h24v24H0V0z"/>
          </defs>
          <clipPath id="b">
            <use xlink:href="#a" overflow="visible"/>
          </clipPath>
          <path clip-path="url(#b)" d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z"/>
        </svg>
        <span>切换设备</span>
      </div>
      <div class="buttonDiv" style="opacity: 0.5" onclick="openUpdate()" id="update">
        <svg viewBox="0 0 1024 1024" class="svg">
          <path
            d="M341.333333 512L170.666667 512l341.333333-341.333333 341.333333 341.333333-170.666666 0L682.666667 853.333333 341.333333 853.333333z">
          </path>
        </svg>
        <span>升级</span>
      </div>
      <div class="buttonDiv" onclick="openAbout()">
        <svg viewBox="0 0 24 24" class="svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
        </svg>
        <span>关于</span>
      </div>
      <div class="buttonDiv" onclick="exit()">
        <svg viewBox="0 0 24 24" class="svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
        </svg>
        <span>退出应用</span>
      </div>
    </div>
    <link rel="stylesheet" href="assets/app.css" type='text/css'>
    <style>
      .buttonDiv {
        height: 40px; display: flex; align-items: center; font-size: 13px; padding-left: 24px; cursor: pointer;
      }
      .buttonDiv:hover {
        background-color: #f5f5f5;
      }
      .svg {
        fill: rgba(0,0,0,.38); height: 18px; width: 18px; margin-right: 16px;
      }
    </style>
    <script>
      const { ipcRenderer } = require('electron')
      const openChangeDevice = () => ipcRenderer.send('OPEN_CHANGE_DEVICE')
      const openUpdate = () => ipcRenderer.send('OPEN_UPDATE')
      const openAbout = () => ipcRenderer.send('OPEN_ABOUT')
      const exit = () => ipcRenderer.send('POWEROFF')
      const hasData = false
      ipcRenderer.on('BACKUP_MSG', ({ status, size, completeSize, count, finishCount, restTime, lastBackupTime }) => {

      })
      ipcRenderer.on('TRAY_DATA', (event, data) => {
        console.log('data', data)
        const { logged, text, storageBar } = data
        if (logged) {
          document.getElementById('changeDeviceButton').style.opacity = 1
        } else {
          document.getElementById('changeDeviceButton').style.cursor = 'not-allowed'
          document.getElementById('changeDeviceButton').style['background-color'] = '#FFF'
        }
        text.forEach(t => {
          const id = t[0]
          const value = t[1]
          const ele = document.getElementById(id)
          if (!ele) return
          console.log(id, value)
          if (!value) ele.style.opacity = 0
          ele.innerHTML = value
        })
      })
      ipcRenderer.send('REQ_TRAY_DATA')
      console.log('script load')
    </script>
  </body>
</html>
